---
- name: Use branch fom extra_vars, when explicitly provided
  set_fact:
    ansistrano_git_branch: "{{ branch }}"
  when: branch is defined

- name: Use git_remote from extra_vars, if the default was not overriden
  set_fact:
    ansistrano_git_repo: "{{ git_remote }}"
  when: ansistrano_git_repo.find('USERNAME/REPO.git') != -1

- name: Clear deploy key for https remotes
  set_fact:
    ansistrano_git_identity_key_path: ''
  when: ansistrano_git_repo.startswith('https://')
